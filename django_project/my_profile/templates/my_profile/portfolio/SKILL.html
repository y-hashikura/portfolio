{% load custom_tags %}
<div class="container mt-4" style="width: 50%;">
    <table class="table table-striped" style="background-color: floralwhite;">
        <thead style="background-color: floralwhite; text-align: left;">
            <tr>
                <th>カテゴリ</th>
                <th>スキル</th>
                <th>使用期間</th>
                <th>習熟度</th>
            </tr>
        </thead>
        <tbody style="background-color: floralwhite;">  <!-- 同じクリーム色を適用 -->
            {% for skill in skills %}
                <tr 
                    class="clickable-row" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#details-{{ skill.name }}" 
                    style="background-color: floralwhite; text-align: left;"
                >
                    <td>{{ skill.category }}</td>
                    <td>{{ skill.name }}</td>
                    <td>{{ skill.period }}</td>
                    <td>
                        {% for i in 1|range_filter:6 %}
                            {% if skill.level.name >= i %}
                                <span style="color: gold;">★</span>
                            {% else %}
                                <span style="color: lightgray;">★</span>
                            {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr id="details-{{ skill.name }}" class="collapse">
                    <td colspan="4" style="text-align: left;">
                        <strong>詳細内容:</strong> Pythonを使用して、Webアプリケーションの開発、データ処理、自動化スクリプトの作成などを行いました。
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll('.clickable-row').forEach(function(row) {
            // ダブルクリックイベントを設定
            row.addEventListener('dblclick', function() {
                const target = this.dataset.bsTarget;
                const collapseElement = document.querySelector(target);

                // トグル機能: 開閉状態の確認
                if (collapseElement.classList.contains('show')) {
                    collapseElement.classList.remove('show');  // 開いているなら閉じる
                } else {
                    document.querySelectorAll('.collapse').forEach(function(el) {
                        el.classList.remove('show');  // 他の詳細は閉じる
                    });
                    collapseElement.classList.add('show');  // 対象の詳細を開く
                }
            });
        });
    });
</script>
